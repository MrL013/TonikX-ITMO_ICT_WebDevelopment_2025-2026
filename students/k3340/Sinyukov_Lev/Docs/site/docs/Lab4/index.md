# Лабораторная работа № 4

Реализация клиентской части приложения средствами vue.js.

## Тема работы
`Администрирование гостиницы`

Создать программную систему, предназначенную для администратора гостиницы.
Такая система должна обеспечивать хранение сведений об имеющихся в гостинице
номерах, о проживающих в гостинице клиентах и о служащих, убирающихся в номерах.
Количество номеров в гостинице известно, и имеются номера трех типов: одноместный,
двухместный и трехместный, отличающиеся стоимостью проживания в сутки. В каждом
номере есть телефон.
О каждом проживающем должна храниться следующая информация: номер
паспорта, фамилия, имя, отчество, город, из которого он прибыл, дата поселения в
гостинице, выделенный гостиничный номер.
О служащих гостиницы должна быть известна информация следующего содержания:
фамилия, имя, отчество, где (этаж) и когда (день недели) он убирает. Служащий
гостиницы убирает все номера на одном этаже в определенные дни недели, при этом в
разные дни он может убирать разные этажи.
Работа с системой предполагает получение следующей информации:

- о клиентах, проживавших в заданном номере, в заданный период времени;
- о количестве клиентов, прибывших из заданного города,
- о том, кто из служащих убирал номер указанного клиента в заданный день недели,
- сколько в гостинице свободных номеров;
- список клиентов с указанием места жительства, которые проживали в те же дни,
что и заданный клиент, в определенный период времени.
Администратор должен иметь возможность выполнить следующие операции:
- принять на работу или уволить служащего гостиницы;
- изменить расписание работы служащего;
- поселить или выселить клиента.
Необходимо предусмотреть также возможность автоматической выдачи отчета о
работе гостиницы за указанный квартал текущего года. Такой отчет должен содержать
следующие сведения:
- число клиентов за указанный период в каждом номере;
- количество номеров не каждом этаже;
- общая сумма дохода за каждый номер;
- суммарный доход по всей гостинице.


# Hotel Management System (Vue + Django REST)

## Описание проекта

Данный проект представляет собой полнофункциональное веб-приложение для управления гостиницей (**Hotel Management System**), реализованное с использованием:

- **Backend**: Django + Django REST Framework + Djoser + JWT
- **Frontend**: Vue 3 + Vite + Pinia + Vue Router + Vuetify 3

Проект реализован в рамках учебной работы и демонстрирует:
- клиент–серверное взаимодействие
- авторизацию и аутентификацию
- настройку CORS
- работу с REST API
- построение SPA-приложения

---

## Архитектура проекта

### Общая структура

```text
project-root/
├── hotel-back/          # Django backend
│   ├── manage.py
│   ├── config/          # Django project settings
│   └── hotel/           # Основное приложение
│
└── hotel-front/         # Vue frontend
    ├── package.json
    ├── vite.config.js
    └── src/
        ├── api/
        ├── components/
        ├── layouts/
        ├── router/
        ├── stores/
        └── views/
```

---

## Backend (Django REST Framework)

### Используемые технологии

- Django
- Django REST Framework
- Djoser (готовые эндпоинты авторизации)
- Simple JWT (access / refresh токены)
- django-cors-headers

---

### Авторизация и аутентификация

Используется JWT-аутентификация.

Основные эндпоинты:

| Метод | URL | Описание |
|------|-----|----------|
| POST | `/auth/users/` | Регистрация пользователя |
| POST | `/auth/jwt/create/` | Получение access и refresh токенов |
| POST | `/auth/jwt/refresh/` | Обновление access токена |
| GET  | `/auth/users/me/` | Получение данных текущего пользователя |

---

### CORS

Для обеспечения взаимодействия фронтенда и бэкенда настроен CORS.

```python
INSTALLED_APPS = [
    "corsheaders",
    ...
]

MIDDLEWARE = [
    "corsheaders.middleware.CorsMiddleware",
    "django.middleware.common.CommonMiddleware",
    ...
]

CORS_ALLOWED_ORIGINS = [
    "http://localhost:5173",
]
CORS_ALLOW_CREDENTIALS = True
```

---

### REST API

Реализованы CRUD-эндпоинты для сущностей:

- Rooms
- Clients
- Stays
- Employees
- Cleaning Schedules

Также реализованы аналитические эндпоинты:

- свободные комнаты
- клиенты в комнате
- пересечение проживаний
- отчёты

Все эндпоинты защищены JWT-аутентификацией.

---

## Frontend (Vue 3 + Vuetify)

### Используемые технологии

- Vue 3 (Composition API)
- Vite
- Pinia (state management)
- Vue Router
- Vuetify 3
- Axios

---

### Структура frontend-приложения

```text
src/
├── api/                # Axios, endpoints
├── components/         # Переиспользуемые компоненты
├── layouts/            # Layout-ы (MainLayout)
├── router/             # Vue Router + guards
├── stores/             # Pinia stores (auth, ui)
└── views/              # Страницы приложения
```

---

### Авторизация на клиенте

Авторизация реализована через **Pinia store** (`auth.js`).

Хранится:
- access / refresh токены (localStorage)
- текущий пользователь (`user`)

При истечении access-токена автоматически выполняется refresh.

---

### Route Guards

Для защиты маршрутов используется `router.beforeEach`.

Логика:

- публичные страницы: `/login`, `/register`
- все остальные маршруты требуют авторизации
- если токен есть, но пользователь не загружен — выполняется `fetchMe()`
- при ошибке — logout и редирект на `/login`

---

### UI и Vuetify

Интерфейс построен с использованием **Vuetify 3**:

- Navigation Drawer
- Data Tables
- Dialogs (Create / Edit / Delete)
- Snackbar уведомления

Реализован универсальный компонент `DataTableCrud.vue`, поддерживающий:

- CRUD-операции
- select / date / switch поля
- отображение ошибок валидации
- кастомные слоты

---

## Запуск проекта

### Backend

```bash
python manage.py migrate
python manage.py runserver
```

### Frontend

```bash
cd hotel-front
npm install
npm run dev
```

Frontend доступен по адресу:

```
http://localhost:5173
```

---

## Вывод

В ходе работы было реализовано приложение с:

- корректной авторизацией
- безопасным взаимодействием frontend ↔ backend
- расширяемой архитектурой


Программная реализация доступна по [ссылке](https://github.com/MrL013/TonikX-ITMO_ICT_WebDevelopment_2025-2026/tree/main/students/k3340/Sinyukov_Lev/Lr_4/)